<div nz-row nzGutter="25">
  <!-- skeleton -->
  <ng-template #loadingSkeleton>
    <nz-skeleton
      class="bg-white dark:bg-white/10 rounded-6 p-[30px] pt-[15px]"
      [nzShape]="'circle'"
      [nzActive]="true"
      [nzParagraph]="{ rows: 12 }">
    </nz-skeleton>
  </ng-template>
  <!-- skeleton end -->

  <div nz-col nzXs="24">
    <div nz-row nzGutter="25">
      <div
        nz-col
        nzXXl="6"
        nzLg="8"
        nzSm="12"
        nzXs="24"
        class="mb-[25px]"
        *ngFor="let card of pricing">
        <ng-container *ngIf="showContent; else loadingSkeleton">
          <div class="bg-white dark:bg-white/10 p-7 rounded-10 shadow-pricing flex flex-col gap-4">
            
            <!-- Title -->
            <span
              class="inline-block bg-[#F5F3FF] text-[#6D28D9] px-4 py-1 rounded-xl text-sm font-medium">
              {{ card.planName }}
            </span>

            <!-- Price -->
            <h1 class="text-4xl font-bold text-dark dark:text-white/[.87] flex items-end gap-2">
              <sup class="text-lg text-gray-400 -translate-y-2">$</sup>{{ card.price }}
              <sub class="text-sm text-gray-500 capitalize">{{ card.billingType }}</sub>
            </h1>

            <!-- User Count -->
            <span class="text-sm font-medium text-gray-500">{{ card.userCount }}</span>

            <!-- Features -->
            <div class="flex flex-col gap-3 mt-4 mb-6 min-h-[210px]">
              <div class="flex items-center gap-3 text-gray-700 text-[15px]" *ngFor="let feature of card.features">
                <span nz-icon nzType="check" class="text-success"></span>
                <span>{{ feature }}</span>
              </div>
            </div>

            <!-- Action Button -->
            <button
              nz-button (click)="openModal(card)"
              class="h-11 px-7 text-white bg-primary hover:bg-primary-hbr rounded-md font-semibold text-sm capitalize">
              {{ card.buttonText }}
            </button>


          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>

<nz-modal
  [(nzVisible)]="isVisible"
  nzTitle="Select Payment Method"
  (nzOnCancel)="handlesCancel()"
  [nzFooter]="null"
  nzClassName="no-padding-modal"
>
  <ng-container *nzModalContent>
    <nz-tabset [(nzSelectedIndex)]="selectedTabIndex">
<nz-tab *ngFor="let account of paymentAccounts" [nzTitle]="account.bankOrWalletName">
  <div class="p-4 rounded-lg bg-pink-100 border border-pink-300 flex flex-col gap-4">

    <div class="flex justify-center items-center pb-3 border-b-4" [ngStyle]="{ 'border-color': account.bankOrWalletName.toLowerCase() === 'bkash' ? '#e2136e' : '#e68326' }">
      <img [src]="account.logo" alt="{{ account.bankOrWalletName }} Logo" class="h-11" />
    </div>

    <div class="flex justify-between font-bold text-pink-700 text-lg">
      <span>{{ selectedPackageName }}</span>
      <span>TK {{ selectedPackageprice }}</span>
    </div>

    <div [ngClass]="getMainClass(account.bankOrWalletName)">
      <p class="text-center font-semibold text-lg">ট্রানজেকশন আইডি দিন</p>
      <input nz-input [(ngModel)]="transactionId" placeholder="ট্রানজেকশন আইডি দিন" class="w-full rounded-6 border-normal border-1 text-[15px] dark:bg-white/10 dark:border-white/10 px-[20px] py-[12px] min-h-[50px] outline-none placeholder:text-[#A0A0A0] text-theme-gray dark:text-white/60"/>

      <p class="text-white-800 text-sm leading-6 space-y-3">

        <span class="flex items-start gap-2">
          <i nz-icon nzType="check" class="mt-1"></i>
          <span>*247# ডায়াল করে {{ account.bankOrWalletName }} App অথবা মোবাইল থেকে Send Money করুন।</span>
        </span>

        <span class="flex items-start gap-2">
          <i nz-icon nzType="check" class="mt-1"></i>
          <span>
            প্রাপক নম্বর: 
            <span class="font-bold text-lg flex items-center gap-2">
              {{ account.accountNumber }}
              <i nz-icon nzType="copy" nzTheme="outline" class="cursor-pointer" (click)="copyNumber(account.accountNumber)"></i>
            </span>
          </span>
        </span>

        <span class="flex items-start gap-2">
          <i nz-icon nzType="check" class="mt-1"></i>
          <span>টাকার পরিমাণঃ {{ selectedPackageprice }}</span>
        </span>

        <span class="flex items-start gap-2">
          <i nz-icon nzType="check" class="mt-1"></i>
          <span>উপরের বক্সে Transaction ID দিন এবং Confirm ক্লিক করুন।</span>
        </span>

      </p>
    </div>

    <div class="flex justify-end gap-2 mt-4">
      <button nz-button class="cancelButton" (click)="handlesCancel()">Cancel</button>
      <button
        nz-button
        [disabled]="isSubmitting"
        (click)="submit()"
        [ngClass]="getButtonClass(account.bankOrWalletName)">
        <span *ngIf="!isSubmitting">Confirm</span>
        <span *ngIf="isSubmitting"><i nz-icon nzType="loading"></i> Processing...</span>
      </button>
    </div>

  </div>
</nz-tab>

    </nz-tabset>
  </ng-container>
</nz-modal>

<!-- <nz-modal
  [(nzVisible)]="isVisible"
  nzTitle="Select Payment Method"
  (nzOnCancel)="handlesCancel()"
  [nzFooter]="null"   nzClassName="no-padding-modal"

>
  <ng-container *nzModalContent>
  <nz-tabset [(nzSelectedIndex)]="selectedTabIndex" [style.padding-top.px]="0" [style.padding-bottom.px]="0">
    <nz-tab nzTitle="Nagad">
        <div class="p-4 rounded-lg bg-pink-100 border border-pink-300 flex flex-col gap-4">
        <div class="flex justify-center items-center pb-3 border-b-4" style="border-color: #e68326;">
          <img src="../../../../assets/images/watchmate/nogod.png" alt="Nagad Logo" class="h-11" />
        </div>
        <div class="flex justify-between font-bold text-pink-700 text-lg">
        <span class="font-bold">{{ selectedPackageName }}</span>
         <span class="font-bold">TK {{ selectedPackageprice }}</span>

        </div>

        <div class="nagad-main">
          <p class="text-center text-pink-700 font-semibold text-lg">ট্রানজেকশন আইডি দিন</p>
          <input nz-input [(ngModel)]="transactionId" placeholder="ট্রানজেকশন আইডি দিন"
            class="w-full rounded-6 border-normal border-1 text-[15px] dark:bg-white/10 dark:border-white/10 px-[20px] py-[12px] min-h-[50px] outline-none placeholder:text-[#A0A0A0] text-theme-gray dark:text-white/60" />
        
          <p class="text-white-800 text-sm leading-6 space-y-3">
        
            <span class="flex items-start gap-2">
              <i nz-icon nzType="check" class="mt-1 text-pink-700"></i>
              <span>*247# ডায়াল করে আপনার Nagad মোবাইল <br>(অথবা Nagad App) থেকে Send Money এ ক্লিক করুন।</span>
            </span>
        
            <span class="flex items-start gap-2">
              <i nz-icon nzType="check" class="mt-1 text-pink-700"></i>
              <span>প্রাপক নম্বর হিসাবে এই নম্বরটি লিখুনঃ <br>
                <span class="text-pink-700 font-bold text-lg flex items-center gap-2">
                  01837908296
                  <i nz-icon nzType="copy" nzTheme="outline" class="cursor-pointer" (click)="copyNumber('01837908296')"></i>
                </span>
              </span>
            </span>
        
            <span class="flex items-start gap-2">
              <i nz-icon nzType="check" class="mt-1 text-pink-700"></i>
              <span>টাকার পরিমাণঃ {{ selectedPackageprice }}</span>
            </span>
        
            <span class="flex items-start gap-2">
              <i nz-icon nzType="checkt" class="mt-1 text-pink-700"></i>
              <span>উপরের বক্সে আপনার Transaction ID দিন এবং নিচের Confirm বাটনে ক্লিক করুন।</span>
            </span>
        
          </p>

      </div>


    <div class="flex justify-end gap-2 mt-4">
      <button nz-button
        class="cancelButton text-white dark:text-white/[.87] text-[14px] font-semibold leading-[22px] inline-flex items-center justify-center rounded-[4px] px-[30px] h-[44px]"  (click)="handlesCancel()">Cancel</button>
                <button nz-button [disabled]="isSubmitting" (click)="submit()" class="nagadButton text-white dark:text-white/[.87] text-[14px] font-semibold leading-[22px] inline-flex items-center justify-center rounded-[4px] px-[30px] h-[44px]">
            <span *ngIf="!isSubmitting">Confirm</span>
            <span *ngIf="isSubmitting">
              <i nz-icon nzType="loading"></i> Processing...
            </span>
          </button>
    </div>
      </div>
    </nz-tab>

    <nz-tab nzTitle="bKash">
      <div class="p-4 rounded-lg bg-pink-100 border border-pink-300 flex flex-col gap-4">
        <div class="flex justify-center items-center pb-3 border-b-4" style="border-color: #e2136e;">
          <img src="../../../../assets/images/watchmate/Bkash-Logo.png" alt="Bkash Logo" class="h-11" />
        </div>
        <div class="flex justify-between font-bold text-pink-700 text-lg">
          <span class="font-bold">{{ selectedPackageName }}</span>
          <span class="font-bold">TK {{ selectedPackageprice }}</span>

        </div>

        <div class="bkash-main">
          <p class="text-center text-pink-700 font-semibold text-lg">ট্রানজেকশন আইডি দিন</p>
          <input nz-input [(ngModel)]="transactionId" placeholder="ট্রানজেকশন আইডি দিন"
            class="w-full rounded-6 border-normal border-1 text-[15px] dark:bg-white/10 dark:border-white/10 px-[20px] py-[12px] min-h-[50px] outline-none placeholder:text-[#A0A0A0] text-theme-gray dark:text-white/60" />
          <p class="text-white-800 text-sm leading-6 space-y-3">
        
            <span class="flex items-start gap-2">
              <i nz-icon nzType="check" class="mt-1 text-pink-700"></i>
              <span>*247# ডায়াল করে আপনার Bkash মোবাইল <br>(অথবা Bkash App) থেকে Send Money এ ক্লিক করুন।</span>
            </span>
        
            <span class="flex items-start gap-2">
              <i nz-icon nzType="check" class="mt-1 text-pink-700"></i>
              <span>প্রাপক নম্বর হিসাবে এই নম্বরটি লিখুনঃ <br>
                <span class="text-pink-700 font-bold text-lg flex items-center gap-2">
                  01837908296
                  <i nz-icon nzType="copy" nzTheme="outline" class="cursor-pointer" (click)="copyNumber('01837908296')"></i>
                </span>
              </span>
            </span>
        
            <span class="flex items-start gap-2">
              <i nz-icon nzType="check" class="mt-1 text-pink-700"></i>
              <span>টাকার পরিমাণঃ 500</span>
            </span>
        
            <span class="flex items-start gap-2">
              <i nz-icon nzType="checkt" class="mt-1 text-pink-700"></i>
              <span>উপরের বক্সে আপনার Transaction ID দিন এবং নিচের Confirm বাটনে ক্লিক করুন।</span>
            </span>
        
          </p>

      </div>


    <div class="flex justify-end gap-2 mt-4">
      <button nz-button
        class="cancelButton text-white dark:text-white/[.87] text-[14px] font-semibold leading-[22px] inline-flex items-center justify-center rounded-[4px] px-[30px] h-[44px]"  (click)="handlesCancel()">Cancel</button>


        
          <button nz-button [disabled]="isSubmitting" (click)="submit()"  class="bkashButton text-white dark:text-white/[.87] text-[14px] font-semibold leading-[22px] inline-flex items-center justify-center rounded-[4px] px-[30px] h-[44px]">
            <span *ngIf="!isSubmitting">Confirm</span>
            <span *ngIf="isSubmitting">
              <i nz-icon nzType="loading"></i> Processing...
            </span>
          </button>

    </div>
      </div>
    </nz-tab>
  </nz-tabset>
  </ng-container>
</nz-modal> -->


